{
  "id": "OTAE2EGreaterVersion",
  "title": "Amazon FreeRTOS OTA E2E Test to test Greater version OTA Update",
  "details": "This test case will run all AFR Full OTA E2E to test if the board can perform OTA Update of Greater version of image",
  "execution": {
    "timeout": 2400000,
    "mac": {
      "cmd": "./../../../afq_mac_x86-64",
      "args": [
        "run-test",
        "--test-group",
        "OTATestGreaterVersion",
        "--device",
        "{\"board\":\"{{device.id}}\", \"uartConnectivity\" : { \"serialPort\" : \"{{device.connectivity.serialPort}}\"}}",
        "--src-path",
        "{{userData.sourcePath}}",
        "--build-cmds",
        "{{userData.buildTool.command[:]}}",
        "--flash-cmds",
        "{{userData.flashTool.command[:]}}",
        "--build-image-info",
        "{\"testsImageName\": \"{{userData.flashTool.buildImageInfo.testsImageName}}\", \"demosImageName\": \"{{userData.flashTool.buildImageInfo.demosImageName}}\"}",
        "--test-artifacts-path",
        "{{testData.testArtifactsPath}}",
        "--test-tmp-src-code-path",
        "{{testData.sourcePath}}",
        "--ota-configuration",
        "{\"otaDemoConfigFilePath\":\"{{userData.otaConfiguration.otaDemoConfigFilePath}}\",\"otaFirmwareFilePath\":\"{{userData.otaConfiguration.otaFirmwareFilePath}}\", \"deviceFirmwareFileName\":\"{{userData.otaConfiguration.deviceFirmwareFileName}}\", \"awsSignerPlatform\":\"{{userData.otaConfiguration.awsSignerPlatform}}\", \"awsSignerCertificateArn\":\"{{userData.otaConfiguration.awsSignerCertificateArn}}\", \"awsUntrustedSignerCertificateArn\":\"{{userData.otaConfiguration.awsUntrustedSignerCertificateArn}}\", \"awsSignerCertificateFileName\":\"{{userData.otaConfiguration.awsSignerCertificateFileName}}\",\"compileCodesignerCertificate\":{{userData.otaConfiguration.compileCodesignerCertificate}}}",
        "--wifi-enabled",
        "{{devicepool.features[?(@.name == 'WIFI')].value[0]}}"
      ]
    },
    "linux": {
      "cmd": "./../../../afq_linux_x86-64",
      "args": [
        "run-test",
        "--test-group",
        "OTATestGreaterVersion",
        "--device",
        "{\"board\":\"{{device.id}}\", \"uartConnectivity\" : { \"serialPort\" : \"{{device.connectivity.serialPort}}\"}}",
        "--src-path",
        "{{userData.sourcePath}}",
        "--build-cmds",
        "{{userData.buildTool.command[:]}}",
        "--flash-cmds",
        "{{userData.flashTool.command[:]}}",
        "--build-image-info",
        "{\"testsImageName\": \"{{userData.flashTool.buildImageInfo.testsImageName}}\", \"demosImageName\": \"{{userData.flashTool.buildImageInfo.demosImageName}}\"}",
        "--test-artifacts-path",
        "{{testData.testArtifactsPath}}",
        "--test-tmp-src-code-path",
        "{{testData.sourcePath}}",
        "--ota-configuration",
        "{\"otaDemoConfigFilePath\":\"{{userData.otaConfiguration.otaDemoConfigFilePath}}\",\"otaFirmwareFilePath\":\"{{userData.otaConfiguration.otaFirmwareFilePath}}\", \"deviceFirmwareFileName\":\"{{userData.otaConfiguration.deviceFirmwareFileName}}\", \"awsSignerPlatform\":\"{{userData.otaConfiguration.awsSignerPlatform}}\", \"awsSignerCertificateArn\":\"{{userData.otaConfiguration.awsSignerCertificateArn}}\", \"awsUntrustedSignerCertificateArn\":\"{{userData.otaConfiguration.awsUntrustedSignerCertificateArn}}\", \"awsSignerCertificateFileName\":\"{{userData.otaConfiguration.awsSignerCertificateFileName}}\",\"compileCodesignerCertificate\":{{userData.otaConfiguration.compileCodesignerCertificate}}}",
        "--wifi-enabled",
        "{{devicepool.features[?(@.name == 'WIFI')].value[0]}}"
      ]
    },
    "win": {
      "cmd": "./../../../afq_win_x86-64.exe",
      "args": [
        "run-test",
        "--test-group",
        "OTATestGreaterVersion",
        "--device",
        "{\"board\":\"{{device.id}}\", \"uartConnectivity\" : { \"serialPort\" : \"{{device.connectivity.serialPort}}\"}}",
        "--src-path",
        "{{userData.sourcePath}}",
        "--build-cmds",
        "{{userData.buildTool.command[:]}}",
        "--flash-cmds",
        "{{userData.flashTool.command[:]}}",
        "--build-image-info",
        "{\"testsImageName\": \"{{userData.flashTool.buildImageInfo.testsImageName}}\", \"demosImageName\": \"{{userData.flashTool.buildImageInfo.demosImageName}}\"}",
        "--test-artifacts-path",
        "{{testData.testArtifactsPath}}",
        "--test-tmp-src-code-path",
        "{{testData.sourcePath}}",
        "--ota-configuration",
        "{\"otaDemoConfigFilePath\":\"{{userData.otaConfiguration.otaDemoConfigFilePath}}\",\"otaFirmwareFilePath\":\"{{userData.otaConfiguration.otaFirmwareFilePath}}\", \"deviceFirmwareFileName\":\"{{userData.otaConfiguration.deviceFirmwareFileName}}\", \"awsSignerPlatform\":\"{{userData.otaConfiguration.awsSignerPlatform}}\", \"awsSignerCertificateArn\":\"{{userData.otaConfiguration.awsSignerCertificateArn}}\", \"awsUntrustedSignerCertificateArn\":\"{{userData.otaConfiguration.awsUntrustedSignerCertificateArn}}\", \"awsSignerCertificateFileName\":\"{{userData.otaConfiguration.awsSignerCertificateFileName}}\",\"compileCodesignerCertificate\":{{userData.otaConfiguration.compileCodesignerCertificate}}}",
        "--wifi-enabled",
        "{{devicepool.features[?(@.name == 'WIFI')].value[0]}}"
      ]
    }
  }
}
